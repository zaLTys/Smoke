@using UI.Components.Loader
@using UI.ViewModels.Requests
@inherits DataLoader

<Content State="State" ErrorMessage="ErrorMessage">
    <MudContainer Style="max-width: 10000px; width: 100%; margin-left: 0;">
        <MudGrid>
            <MudItem xs="12" sm="6" md="6" lg="6">
                <MudPaper Class="pa-4 my-2" Style="width:100%;">
                    <MudGrid>
                        <MudItem xs="12">
                            <MudText Typo="Typo.h6">API Requests</MudText>
                            <MudButton Variant="Variant.Filled"
                                       Color="Color.Primary"
                                       StartIcon="@Icons.Material.Filled.Add"
                                       OnClick="@NavigateToNewRequestPage">
                                       Add
                            </MudButton>
                        </MudItem>
                        <MudItem xs="12">
                            <MudTextField @bind-Value="SearchText"
                                          Label="Search"
                                          Immediate="true"
                                          Variant="Variant.Outlined" />
                        </MudItem>
                        <MudItem xs="12">
                            @if (FilteredRequests != null && FilteredRequests.Any())
                            {
                                <MudList T="ApiRequestViewModel">
                                    @foreach (var request in FilteredRequests)
                                    {
                                        <MudListItem OnClick="@(() => OnSelected.InvokeAsync(request))">
                                            @request.Name
                                        </MudListItem>
                                    }
                                </MudList>
                            }
                            else
                            {
                                <MudText>No API requests found.</MudText>
                            }
                        </MudItem>
                    </MudGrid>
                </MudPaper>
            </MudItem>
        </MudGrid>
    </MudContainer>
</Content>
